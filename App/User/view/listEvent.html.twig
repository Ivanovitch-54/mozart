{% extends "layout.html.twig" %}
{% block title %}
<title>Mes événements</title>
{% endblock %}
{% block stylesheet %}
<link rel="stylesheet" href="{{ absolute(assets('assets/css/event.css')) }}">
{% endblock %}
{% block body %}

<h2 class="mx-auto text-center bg-white border rounded-4 align-self-center">Mes événements</h2>
<div class="container card-group gap-3 text-center mb-5 w-auto">
    {% for evenement in evenements %}
    {% if evenement.user_register == true %}

    <div class="card border border-dark rounded my-5">
        <div class="card-body">
            <h5 class="card-title text-uppercase my-2">{{ evenement.nom }}</h5>
            <hr>
            <p class="card-text my-3">{{ evenement.description }}</p>
            <hr>
            <p class="card-text">Débute le {{ evenement.startAt|date("d/m/Y\\", "Europe/Paris") }} à {{
                evenement.startAt|date("H:i", "Europe/Paris") }}</p>
            <p class="card-text">Fini le {{ evenement.endAt|date("d/m/Y\\", "Europe/Paris") }} à {{
                evenement.endAt|date("H:i", "Europe/Paris") }}</p>
            <hr>
            {% if evenement.places_dispo > 0 %}
            <p class="card-text"><small class="text-dark">Nombres de places restantes : <span
                        class="text-danger fs-5 bolder">{{
                        evenement.places_dispo }}</span></small></p>
            {% else %}
            <p class="card-text"><small class="text-success text-uppercase">Complet</small></p>
            {% endif %}
            <button class="btn btn-danger">
                <a href="{{ path('user.decoEvent', {id: evenement.id}) }}" class="text-decoration-none text-white">Se
                    désinscrire</a>
            </button>
        </div>
    </div>
    {% endif %}
    {% endfor %}

    {% endblock %}



    {# Ancienne Version sous forme de Tableau
    <div class="container text-center my-2 d-flex flex-column align-items-center">

        <h2 class="text-center my-4 border rounded-4 bg-white">Liste des événements où vous êtes inscrit</h2>
        <table>
            <thead class="bg-white">
                <tr>
                    <th>Nom de l'événement</th>
                    <th>Description de l'événement</th>
                    <th>Intervenant de l'événement</th>
                    <th>Débute à </th>
                    <th>Fini à </th>
                    <th>Options</th>
                </tr>
            </thead>

            <tbody class="bg-white">
                {% for evenement in evenements %}
                <tr>
                    <td>{{ evenement.nom }}</td>
                    <td>{{ evenement.description }}</td>
                    <td>{% for intervenant in evenement.intervenants %}
                        {{ intervenant.nom }}
                        {% endfor %}</td>
                    <td>{{ evenement.startAt|date("d/m/Y\\ H:i", "Europe/Paris") }}</td>
                    <td>{{ evenement.endAt|date("d/m/Y\\ H:i", "Europe/Paris") }}</td>
                    <td>
                        <a href="{{ path('user.decoEvent', {id: evenement.id}) }}"
                            class="text-decoration-none text-danger">Se désinscrire</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endblock %} #}