{% extends "layout.html.twig" %}
{% block title %}
<title>Listes événements disponibles</title>
{% endblock %}
{% block stylesheet %}

<link rel="stylesheet" href="{{ assets('/assets/css/userEvent.css') }}" />
{% endblock %}
{% block body %}


<h2 class="text-center mx-auto border rounded bg-white mb-4 py-2">Liste des événements disponibles</h2>
<div class="container card-group gap-3 text-center pt-3">
    {% for evenement in evenements %}
    {% if evenement.user_register == false %}
    <div class="card border border-dark rounded">
        <div class="card-body">
            <h5 class="card-title fs-3 my-2">{{ evenement.nom }}</h5>
            <hr>
            <p class="card-text my-3">{{ evenement.description }}</p>
            <hr>
            <p class="card-text">Débute le {{ evenement.startAt|date("d/m/Y\\", "Europe/Paris") }} à {{
                evenement.startAt|date("H:i", "Europe/Paris") }}</p>
            <p class="card-text">Fini le {{ evenement.endAt|date("d/m/Y\\", "Europe/Paris") }} à {{
                evenement.endAt|date("H:i", "Europe/Paris") }}</p>
            <hr>
            {% if evenement.places_dispo != 0 %}
            <p class="card-text"><small class="text-dark">Nombres de places restantes : <span
                        class="text-danger fs-5 bolder">{{
                        evenement.places_dispo }}</span></small></p>
            {% else %}
            <p class="card-text"><small class="text-danger text-uppercase bolder fs-5">Complet</small></p>
            {% endif %}

            {{ csrf() }}

        </div>
        {% if evenement.user_register == false and evenement.places_dispo != 0 %}
        <button class="btn btn-primary mb-3 w-50 mx-auto">
            <a href="{{ path('user.inscEvent', {id: evenement.id}) }}"
                class="text-decoration-none text-white">Participer</a>
        </button>

        {% elseif evenement.user_register == true %}
        <button class="btn btn-danger mb-3 w-50 mx-auto">
            <a href="{{ path('user.decoEvent', {id: evenement.id}) }}" class="text-decoration-none text-white">Se
                désinscrire</a>
        </button>
        {% endif %}
    </div>
    {% endif %}
    {% endfor %}
    {% endblock %}
