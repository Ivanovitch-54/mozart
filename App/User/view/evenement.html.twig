{% extends "layout.html.twig" %}
{% block title %}
<title>Listes événements disponibles</title>
{% endblock %}
{% block stylesheet %}
<link rel="stylesheet" href="{{ assets('/assets/css/home.css') }}" />
<link rel="stylesheet" href="{{ assets('/assets/css/event.css') }}" />
{% endblock %}
{% block body %}
<div class="container my-2 d-flex flex-column align-items-center text-center">

    <h2 class="my-2 border rounded-4 bg-white px-2 text-center">Liste des événements disponibles</h2>
    <table class="my-3">
        <thead class="bg-white">
            <tr>
                <th>Nom de l'événement</th>
                <th>Description de l'événement</th>
                <th>Intervenant de l'événement</th>
                <th>Débute à </th>
                <th>Fini à </th>
                <th>Nombres de places disponibles </th>
                <th>Participer</th>
            </tr>
        </thead>

        <tbody class="bg-white">
            {% for evenement in evenements %}
            <tr>
                <td>{{ evenement.nom }}</td>
                <td>{{ evenement.description }}</td>
                <td>{% for intervenant in evenement.intervenants %}
                    {{ intervenant.nom }}
                    {% endfor %}</td>
                <td>{{ evenement.startAt|date("d/m/Y\\ H:i", "Europe/Paris") }}</td>
                <td>{{ evenement.endAt|date("d/m/Y\\ H:i", "Europe/Paris") }}</td>
                {% if evenement.places_dispo != 0 %}
                <td>{{ evenement.places_dispo }}</td>
                {% else %}
                    <td><span class="text-danger">Complet</span></td>
                {% endif %}
                <td>
                    {% if evenement.user_register == false %}

                    <a href="{{ path('user.inscEvent', {id: evenement.id}) }}"
                        class="text-decoration-none">S'inscrire</a>

                    {% else %}

                    <a href="{{ path('user.decoEvent', {id: evenement.id}) }}"
                        class="text-decoration-none text-danger">Déscinscription</a>
                        
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}